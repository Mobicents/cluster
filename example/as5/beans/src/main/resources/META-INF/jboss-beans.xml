<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:jboss:bean-deployer:2.0">
	
	<bean name="Mobicents.Cluster" class="org.mobicents.cluster.hazelcast.HazelcastCluster">
		<constructor>
			<parameter><inject bean="RealTransactionManager"/></parameter>
		</constructor>				
	</bean>
	
	<bean name="Mobicents.FaultTolerantJavaUtilTimer" class="org.mobicents.timers.timer.FaultTolerantTimer">
		<constructor>
			<parameter>timer</parameter>
			<parameter><inject bean="Mobicents.Cluster"/></parameter>
			<!-- cluster local listener priority -->
			<parameter>10</parameter>
			<parameter><inject bean="RealTransactionManager"/></parameter>
		</constructor>		
	</bean>
	
	<bean name="FaultTolerantTimerServiceExample" class="org.mobicents.cluster.example.as5.FaultTolerantTimerServiceExample">
		<annotation>@org.jboss.aop.microcontainer.aspects.jmx.JMX(name="org.mobicents:name=FaultTolerantTimerServiceExample",exposedInterface=org.mobicents.cluster.example.as5.FaultTolerantTimerServiceExampleMBean.class,registerDirectly=true)
		</annotation>
		<property name="faultTolerantTimer">
			<inject bean="Mobicents.FaultTolerantJavaUtilTimer" />
		</property>
		<property name="jta">
			<inject bean="RealTransactionManager" />
		</property>
		<property name="cluster">
			<inject bean="Mobicents.Cluster" />
		</property>		
	</bean>

</deployment>